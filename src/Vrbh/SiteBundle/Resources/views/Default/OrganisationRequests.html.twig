{% extends '::base.html.twig' %}
{% block title %}{{ "manage.org"|trans|desc("Manage organisation") }} || {{ org.name }}{% endblock %}
{% block body %}
    <h1>{{ org.name }}</h1>
    <p>{{ "org.number.of.requests"|trans({"%requests%": org.userRequests|length})|desc("Number of request: %requests%.") }}</p>
    {% for request in org.userRequests %}
        <div class="col-7 col-sm-6 col-lg-4" data-block-id="{{ request.id }}">
            <h2>{{ request.user.username }}</h2>

            <p>{{ "org.requested.at"|trans({"%at%": request.created|date})|desc("Requested at %at%") }}
                <a class="btn btn-success" data-request="handle" data-action="approve"
                   data-request-id="{{ request.id }}" role="button">{{ "general.approve"|trans|desc("Approve") }}</a>
                <a class="btn btn-danger" data-request="handle" data-action="deny" data-request-id="{{ request.id }}"
                   role="button">{{ "general.deny"|trans|desc("Deny") }}
                </a>
            </p>
        </div>
    {% endfor %}

{% endblock %}


{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('/bundles/vrbhsite/requests.js') }}" type="text/javascript"></script>
    <script type="text/javascript">
        var approveRequest = "{{ path('approveRequest', {'org': org.id, 'request': 0}) }}";
        var denyRequest = "{{ path('denyRequest', {'org': org.id, 'request': 0}) }}";
    </script>

{% endblock %}
